function eventpost_apply(e,t,n){""==jQuery("#geo_address").val()&&jQuery("#geo_address").val(e),jQuery("#geo_latitude").val(t),jQuery("#geo_longitude").val(n),jQuery("#eventaddress_result").html("")}function eventpost_numdate(e){for(;e.indexOf("-")>-1;)e=e.replace("-","");for(;e.indexOf(":")>-1;)e=e.replace(":","");for(;e.indexOf(" ")>-1;)e=e.replace(" ","");for(;e.indexOf("T")>-1;)e=e.replace("T","");for(;e.indexOf("/")>-1;)e=e.replace("/","");return parseInt(e)}function eventpost_chkdate(){console.log("change date"),console.log(eventpost_numdate(jQuery("#"+eventpost.META_START).val())),(""==jQuery("#"+eventpost.META_END).val()||eventpost_numdate(jQuery("#"+eventpost.META_START).val())>eventpost_numdate(jQuery("#"+eventpost.META_END).val()))&&(jQuery("#"+eventpost.META_END).val(jQuery("#"+eventpost.META_START).val()),jQuery("#"+eventpost.META_END).parent().find(".human_date").html(jQuery("#"+eventpost.META_START).parent().find(".human_date").html()))}function eventpost_edit(){sctype=jQuery("#ep_sce_type").val(),"list"==sctype&&(jQuery("#ep_sce_maponly").hide(),jQuery("#ep_sce_listonly").show()),"map"==sctype&&(jQuery("#ep_sce_maponly").show(),jQuery("#ep_sce_listonly").hide());var e="[events_"+sctype;jQuery("#event_post_sc_edit input,#event_post_sc_edit select").each(function(){if(!jQuery(this).hasClass("event_post_sc_no_use")){var t=jQuery(this).parent().parent().parent().attr("class"),n=jQuery(this).data("att"),o=jQuery(this).val();null==n||""==o||"all"!=t&&t!=sctype||(e+=" "+n+'="'+o+'"')}}),e+="]",jQuery("#ep_sce_shortcode").html(e)}function eventpost_insertcontent(e){if(IEbof)switchEditors.go("content","html"),document.post.content.value+=e,switchEditors.go("content","tinymce");else if(document.post.content.value+=e,document.all){value=e,document.getElementById("content_ifr").name="content_ifr";var t=document.getElementById("content_ifr").document.selection;if(tinyMCE.activeEditor.selection)tinyMCE.activeEditor.selection.setContent(e);else if(tinyMCE.activeEditor)tinyMCE.activeEditor.execCommand("mceInsertRawHTML",!1,e);else if(t){var n=t.createRange();n.pasteHTML(value)}}else document.getElementById("content_ifr").name="content_ifr",document.content_ifr?document.content_ifr.document.execCommand("insertHTML",!1,e):document.getElementById("content_ifr").contentDocument?document.getElementById("content_ifr").contentDocument.execCommand("insertHTML",!1,e):tinyMCE.activeEditor.selection?tinyMCE.activeEditor.selection.setContent(e):tinyMCE.activeEditor.execCommand("mceInsertRawHTML",!1,e)}jQuery(document).ready(function(){jQuery("#event_address_search").click(function(){jQuery("#eventaddress_result").html('<input type="search" id="event_address_search_txt"/><input type="button" id="event_address_search_bt" value="ok" class="button"/>'),jQuery("#event_address_search_bt").click(function(){var e=jQuery("#event_address_search_txt").attr("value");console.log(e);var t={action:"EventPostGetLatLong",q:e};jQuery("#eventaddress_result").html(e+'<br/><img src="'+eventpost.imgpath+'loader.gif" alt="..."/>'),jQuery.post(ajaxurl,t,function(e){var t="";for(var n in e)n=e[n],void 0!=n.lat&&void 0!=n.lon&&void 0!=n.display_name&&(t+="<p><a onclick='eventpost_apply(\""+n.display_name.replace("'","&apos;").replace('"',"&quot;")+'","'+n.lat+'","'+n.lon+"\")'>",void 0!=n.icon&&(t+='<img src="'+n.icon+'" alt="'+n.type+'"/>'),t+=n.display_name+"</a></p>");jQuery("#eventaddress_result").html(t)},"json")})}),jQuery("#event_post_sc_edit input,#event_post_sc_edit select").change(function(){eventpost_edit()}),jQuery("#ep_sce_submit").click(function(){eventpost_insertcontent(jQuery("#ep_sce_shortcode").html())}),jQuery("#ep_sce_nball").click(function(){jQuery("#ep_sce_nb").val("-1"),eventpost_edit()}),jQuery("#ep_sce_shortcode").click(function(){jQuery(this).select()}),eventpost_edit(),jQuery.datepicker&&jQuery(".input-date").datepicker({firstDay:1,changeYear:!0,changeMonth:!0,showMonthAfterYear:!0,yearRange:"c-5:+5",buttonText:eventpost.date_choose,showOn:"both",dateFormat:"yy-mm-dd",autoSize:!0}).change(function(){""!=jQuery(this).val()&&jQuery.post(ajaxurl,{action:"EventPostHumanDate",date:jQuery(this).val()},function(e){hd.html(e),eventpost_chkdate()})}),jQuery("body").hasClass("widgets-php")&&jQuery(".widget").each(function(){wid=jQuery(this).attr("id"),wid.indexOf("eventpostmap")>-1?jQuery(this).addClass("eventpost_admin_widget eventpost_widget_map"):wid.indexOf("eventpostcal")>-1?jQuery(this).addClass("eventpost_admin_widget eventpost_widget_cal"):wid.indexOf("eventpost")>-1&&jQuery(this).addClass("eventpost_admin_widget eventpost_widget_list")})});